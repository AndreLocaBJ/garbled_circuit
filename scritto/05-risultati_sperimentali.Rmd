# Risultati sperimentali

Una volta concluso il processo di conversione dei circuiti e  terminato tutto il sistema di automazione dei processi, si è proceduto con l’analisi sperimentale dei dati raccolti, in modo tale da valutare se questo nuovo approccio sviluppato potesse essere considerato una alternativa possibile o vincente rispetto alle proposte già presenti in letteratura.

Tutte le operazioni computazionali sono state effettuate utilizzando un DELL-XPS 13 9350, la macchina ha le seguenti specifiche:

- Processore: Intel i5-6200U@2.30GHz con 2 core e 4 thread
- Memoria: 8Gb LPDDR3@1866MHz
- Sistema Operativo: Ubuntu 21.04

\newpage

## MVSIS

Nelle prime fasi di sperimentazione si e’ decido di utilizzare MVSIS come motore di sintesi , sia per i circuiti binari che per quelli multivalore. Questo primo approccio è nato dalla volontà di replicare le operazioni che si svolgono solitamente sulla logica binaria per poi applicarle alla logica multivalore.

Per le operazioni di sintesi si sono utilizzati i seguenti comandi

```
read_blif_mv ./prova/blfmv/amd.mv
sweep
eliminate -l 1
simplify -m nocomp
eliminate -l 1
sweep
eliminate -l 5
simplify
sweep
eliminate -l 1
sweep
fullsimp -m nocomp
write_blif_mv ./prova/blfmv/synth/mvsis/amd.mv
```
Con questi comandi andiamo ad attuare una sintesi del  circuito preso in ingresso, nello specifico vengono effettuate tutte le operazioni  necessarie di pulizia e di rimozione di nodi inutili tramite i comandi _eliminate_ e _sweep_. Successivamente, tramite _simplify_ e _fullsimp_, il circuito viene semplificato su due livelli: sia  per quanto concerne i nodi presenti all’interno del circuito , sia per quanto riguarda il circuito stesso  nella sua interezza.

Questi comandi sono la conversione della variante **MVSIS** di _script.rugged_ usato con il tool per la logica binaria SIS.  In questo caso, però, Non è stato possibile operare una conversione 1:1 dello script in quanto non tutti i comandi sono replicabili.

Per far fronte alla mancanza di replicabilità di alcuni comandi in questo sistema, è stato necessario eseguire un’ulteriore ricerca Sia In rete che in altri paper riguardanti l’argomento. Quello che ne viene dedotto è che è stato creato ed esiste un determinato script, chiamato _mvsis.rugged_ che ,  secondo la nostra ricerca, dovrebbe rappresentare la vera conversione adattata per il multivalore. Purtroppo però non è stato possibile in alcun modo reperire questo file in nessun repository, rendendolo quindi per noi non utilizzabile ai fini delle analisi.

\newpage

### Conversione multivalore fissa

Come primo approccio alla conversione da binaria a multivalore abbiamo optato per lo stesso valore di dominio per tutti i circuiti. La scelta è stata quella di andare ad aggiungere altri 2 valori rispetto a ad un circuito binario utilizzando il modulo 3.

|NOME CIRC|COSTO BOOL|INPUT ALICE|INPUT BOB|DOMINIO MULTI|COSTO MULTI|INPUT ALICE|INPUT BOB|
|:-------:|:--------:|:---------:|:-------:|:-----------:|:---------:|:---------:|:-------:|
|   amd   |   469    |     7     |    7    |      3      |   47568   |     3     |    4    |
|   tms   |   322    |     4     |    4    |      3      |   2048    |     2     |    2    |
|   pdc   |   2818   |     7     |    7    |      3      |  1310720  |     4     |    4    |
|  mlp4   |   594    |     4     |    4    |      3      |    784    |     2     |    2    |
|  apla   |   343    |     5     |    5    |      3      |   1029    |     2     |    3    |
|  f51m   |   261    |     4     |    4    |      3      |    340    |     2     |    2    |
|   m4    |   974    |     4     |    4    |      3      |   1601    |     2     |    2    |
|newtpla2 |    48    |     5     |    5    |      3      |   2048    |     2     |    3    |
|  test1  |   1095   |     4     |    4    |      3      |   1280    |     2     |    2    |
|   m2    |   339    |     4     |    4    |      3      |   1121    |     2     |    2    |
|   br2   |   179    |     6     |    6    |      3      |   16384   |     3     |    3    |
|  alu1   |    83    |     6     |    6    |      3      |   5122    |     3     |    3    |
|  sqr6   |   197    |     3     |    3    |      3      |    276    |     1     |    2    |
|  bench  |   198    |     3     |    3    |      3      |    256    |     1     |    2    |
|   in5   |   446    |     7     |    7    |      3      | 117440512 |     6     |    6    |
|newtpla1 |    33    |     5     |    5    |      3      |   1024    |     2     |    3    |
|   m3    |   571    |     4     |    4    |      3      |   1169    |     2     |    2    |
| newapla |    83    |     6     |    6    |      3      |   9728    |     3     |    3    |
|  l8err  |   454    |     4     |    4    |      3      |    337    |     2     |    2    |
|   t4    |   238    |     6     |    6    |      3      |   10240   |     3     |    3    |
|   br1   |   252    |     6     |    6    |      3      |   16384   |     3     |    3    |
|  fout   |   442    |     3     |    3    |      3      |    320    |     1     |    2    |
|  mp2d   |   136    |     7     |    7    |      3      |     7     |     3     |    4    |
|  alu2   |   225    |     5     |    5    |      3      |   1282    |     2     |    3    |
|   t3    |   131    |     6     |    6    |      3      |     4     |     3     |    3    |
|   p3    |   385    |     4     |    4    |      3      |   1408    |     2     |    2    |
|   m1    |   125    |     3     |    3    |      3      |    225    |     1     |    2    |
|bcd_div3 |    54    |     2     |    2    |      3      |    32     |     1     |    1    |
|  alu3   |   139    |     5     |    5    |      3      |     4     |     2     |    3    |
|   in7   |   182    |     7     |    7    |      3      | 23085056  |     6     |    7    |

Questa tabella racchiude i risultati ottenuti dalla sintesi dei circuiti multivalore e dei circuiti binari. Possiamo notare che nella maggior parte dei casi il circuito binario mantiene ancora una grande efficienza rispetto a quello multivalore.

### MVSIS e dominio variabile

Nella sperimentazione successiva si è voluto testare un dominio variabile in base al MCD, come descritto nel capitolo precedente. Nella seguente tabella vengono mostrati i costi dei circuiti senza sintesi. Possiamo osservare che nella maggior parte dei casi il dominio multivalore senza sintesi ha un costo minore . Questo risultato può essere considerato una conseguenza diretta del minor numero di input che le parti dovranno inserire all’interno del protocollo durante la computazione. Questi input, essendo in minor quantità, rendono l’intero processo di sintesi più leggero e meno costoso.

|NOME CIRC|COSTO BOOL|INPUT ALICE|INPUT BOB|DOMINIO MULTI|COSTO MULTIVALORE|INPUT ALICE|INPUT BOB|
|:-------:|:--------:|:---------:|:-------:|:-----------:|:---------------:|:---------:|:-------:|
|   amd   |  393216  |     7     |    7    |      4      |     196608      |     3     |    4    |
|   tms   |   4096   |     4     |    4    |     16      |      1024       |     1     |    1    |
|   pdc   | 2621440  |     8     |    8    |      4      |     1310720     |     4     |    4    |
|  mlp4   |   2048   |     4     |    4    |     16      |       512       |     1     |    1    |
|  apla   |  12288   |     5     |    5    |      4      |      6144       |     2     |    3    |
|  f51m   |   2048   |     4     |    4    |     16      |       512       |     1     |    1    |
|   m4    |   4096   |     4     |    4    |     16      |      1024       |     1     |    1    |
|newtpla2 |   4096   |     5     |    5    |      4      |      2048       |     2     |    3    |
|  test1  |   2560   |     4     |    4    |      4      |      1280       |     2     |    2    |
|   m2    |   4096   |     4     |    4    |     16      |      1024       |     1     |    1    |
|   br2   |  32768   |     6     |    6    |     16      |      8192       |     1     |    2    |
|  alu1   |  32768   |     6     |    6    |     16      |      8192       |     1     |    2    |
|  sqr6   |   705    |     3     |    3    |      8      |       256       |     1     |    1    |
|  bench  |   512    |     3     |    3    |      4      |       256       |     1     |    2    |
|   in5   | 1835008  |     9     |    9    |      4      |    117440512    |     6     |    6    |
|newtpla1 |   2048   |     5     |    5    |      4      |      1024       |     2     |    3    |
|   m3    |   4096   |     4     |    4    |     16      |      1024       |     1     |    1    |
| newapla |  40960   |     6     |    6    |      4      |      20480      |     3     |    3    |
|  l8err  |   1283   |     4     |    4    |     16      |       512       |     1     |    1    |
|   t4    |  32768   |     6     |    6    |     16      |      8192       |     1     |    2    |
|   br1   |  32768   |     6     |    6    |     16      |      8192       |     1     |    2    |
|  fout   |   640    |     3     |    3    |      4      |       320       |     1     |    2    |
|  mp2d   |  229376  |     7     |    7    |     128     |      32768      |     1     |    1    |
|  alu2   |   8192   |     5     |    5    |      4      |      4096       |     2     |    3    |
|   t3    |  32768   |     6     |    6    |     16      |      8192       |     1     |    2    |
|   p3    |   3074   |     4     |    4    |      4      |      1792       |     2     |    2    |
|   m1    |   768    |     3     |    3    |      8      |       256       |     1     |    1    |
|bcd_div3 |    64    |     2     |    2    |      4      |       32        |     1     |    1    |
|  alu3   |   8192   |     5     |    5    |      4      |      4096       |     2     |    3    |
|   in7   | 1310720  |     9     |    9    |      4      |    335544320    |     6     |    7    |

\newpage
Una vota applicato la sintesi dei circuiti i risultati sono i seguenti:

|NOME CIRC|COSTO BOOL|INPUT ALICE|INPUT BOB|DOMINIO MULTI|COSTO MULTIVALORE|INPUT ALICE|INPUT BOB|
|:-------:|:--------:|:---------:|:-------:|:-----------:|:---------------:|:---------:|:-------:|
|   amd   |   469    |     7     |    7    |      4      |      47568      |     3     |    4    |
|   tms   |   322    |     4     |    4    |     16      |      1024       |     1     |    1    |
|   pdc   |   2818   |     7     |    7    |      4      |     1310720     |     4     |    4    |
|  mlp4   |   594    |     4     |    4    |     16      |       512       |     1     |    1    |
|  apla   |   343    |     5     |    5    |      4      |      1029       |     2     |    3    |
|  f51m   |   261    |     4     |    4    |     16      |       272       |     1     |    1    |
|   m4    |   974    |     4     |    4    |     16      |      1024       |     1     |    1    |
|newtpla2 |    48    |     5     |    5    |      4      |      2048       |     2     |    3    |
|  test1  |   1095   |     4     |    4    |      4      |      1280       |     2     |    2    |
|   m2    |   339    |     4     |    4    |     16      |      1024       |     1     |    1    |
|   br2   |   179    |     6     |    6    |     16      |      8192       |     1     |    2    |
|  alu1   |    83    |     6     |    6    |     16      |      4097       |     1     |    2    |
|  sqr6   |   197    |     3     |    3    |      8      |       200       |     1     |    1    |
|  bench  |   198    |     3     |    3    |      4      |       256       |     1     |    2    |
|   in5   |   446    |     7     |    7    |      4      |    117440512    |     6     |    6    |
|newtpla1 |    33    |     5     |    5    |      4      |      1024       |     2     |    3    |
|   m3    |   571    |     4     |    4    |     16      |      1024       |     1     |    1    |
| newapla |    83    |     6     |    6    |      4      |      9728       |     3     |    3    |
|  l8err  |   454    |     4     |    4    |     16      |       512       |     1     |    1    |
|   t4    |   238    |     6     |    6    |     16      |      8192       |     1     |    2    |
|   br1   |   252    |     6     |    6    |     16      |      8192       |     1     |    2    |
|  fout   |   442    |     3     |    3    |      4      |       320       |     1     |    2    |

I costi vengono notevolmente abbassati nel caso del booleano mentre in quello multivalore rimangono più elevati. Analizzando Questo fenomeno potremmo trovare una spiegazione nel fatto che la sintesi sui circuiti binari è nettamente più sviluppata e sono stati scoperti metodi di sintesi più efficaci rispetto a quelli studiati per una logica multivalore.

Il tool MVSIS infatti, come affermato in precedenza, non è più stato sviluppato ne mantenuto. All’atto pratico si presenta infatti più lento nella sintesi ed ha una gestione della memoria che porta a dump di memoria durante l’analisi di circuiti di grandi dimensioni.

\newpage

## ABC

Avendo potuto appurare che, inizialmente il costo del circuito multivalore possiede dei costi più bassi per via del minor numero di input, ma che la logica binaria può appoggiarsi a degli strumenti di sintesi più ottimizzati, si è provato ad utilizzare un approccio ibrido tra i due.

Sfruttando quindi come input un circuito multivalore ad ABC, questo tool è in grado di convertire automaticamente il circuito da multivalore a binario,  in modo tale da poter utilizzare i suoi algoritmi di sintesi nettamente più ottimizzati.

```
read_blif_mv ./prova/blfmv/amd.mv
strash
compress2
cl
resyn2
cl
write_blif_mv ./prova/blfmv/synth/abc/amd.mv
```

Rispetto a prima però vi sarà la differenza che l’output post sintesi non sarà più un circuito multivalore , bensì uno binario.

## ABC e dominio fisso

Come con *MVSIS* abbiamo inizialmente utilizzato un dominio fisso per svolgere una prima analisi.

|NOME CIRC|COSTO BOOL|INPUT ALICE|INPUT BOB|DOMINIO MULTI|COSTO MULTIVALORE|INPUT ALICE|INPUT BOB|
|:-------:|:--------:|:---------:|:-------:|:-----------:|:---------------:|:---------:|:-------:|
|   amd   |   469    |     7     |    7    |      2      |      1860       |     7     |    7    |
|   tms   |   322    |     4     |    4    |      2      |       198       |     4     |    4    |
|   pdc   |   2818   |     7     |    7    |      2      |      6032       |     7     |    7    |
|  mlp4   |   594    |     4     |    4    |      2      |       764       |     4     |    4    |
|  apla   |   343    |     5     |    5    |      2      |       213       |     5     |    5    |
|  f51m   |   261    |     4     |    4    |      2      |       808       |     4     |    4    |
|   m4    |   974    |     4     |    4    |      2      |       643       |     4     |    4    |
|newtpla2 |    48    |     5     |    5    |      2      |       48        |     5     |    5    |
|  test1  |   1095   |     4     |    4    |      2      |       354       |     4     |    4    |
|   m2    |   339    |     4     |    4    |      2      |       320       |     4     |    4    |
|   br2   |   179    |     6     |    6    |      2      |       110       |     6     |    6    |
|  alu1   |    83    |     6     |    6    |      2      |       83        |     6     |    6    |
|  sqr6   |   197    |     3     |    3    |      2      |       263       |     3     |    3    |
|  bench  |   198    |     3     |    3    |      2      |       47        |     3     |    3    |
|   in5   |   446    |     7     |    7    |      2      |      1336       |     7     |    7    |
|newtpla1 |    33    |     5     |    5    |      2      |       33        |     5     |    5    |
|   m3    |   571    |     4     |    4    |      2      |       381       |     4     |    4    |
| newapla |    83    |     6     |    6    |      2      |       81        |     6     |    6    |
|  l8err  |   454    |     4     |    4    |      2      |       434       |     4     |    4    |
|   t4    |   238    |     6     |    6    |      2      |       197       |     6     |    6    |
|   br1   |   252    |     6     |    6    |      2      |       153       |     6     |    6    |
|  fout   |   442    |     3     |    3    |      2      |       214       |     3     |    3    |
|  mp2d   |   136    |     7     |    7    |      2      |       315       |     5     |    6    |
|  alu2   |   225    |     5     |    5    |      2      |       554       |     5     |    5    |
|   t3    |   131    |     6     |    6    |      2      |       160       |     6     |    6    |
|   p3    |   385    |     4     |    4    |      2      |       139       |     4     |    4    |
|   m1    |   125    |     3     |    3    |      2      |       116       |     3     |    3    |
|bcd_div3 |    54    |     2     |    2    |      2      |       46        |     2     |    2    |
|  alu3   |   139    |     5     |    5    |      2      |       406       |     5     |    5    |
|   in7   |   182    |     7     |    7    |      2      |      1676       |     7     |    7    |

E’ ora possibile notare come i risultati siano già migliorati e , in molti casi,  la sintesi del circuito multivalore risulti essere migliore di quella binaria, tranne in sporadici casi.

## ABC e dominio variabile

Come ultimo test, come in MVSIS,  abbiamo deciso di applicare anche l’approccio MCD.

|NOME CIRC|COSTO BOOL|INPUT ALICE|INPUT BOB|DOMINIO MULTI|COSTO MULTIVALORE|INPUT ALICE|INPUT BOB|
|:-------:|:--------:|:---------:|:-------:|:-----------:|:---------------:|:---------:|:-------:|
|   amd   |   469    |     7     |    7    |      2      |      1860       |     7     |    7    |
|   tms   |   322    |     4     |    4    |      2      |       184       |     4     |    4    |
|   pdc   |   2818   |     7     |    7    |      2      |      6032       |     7     |    7    |
|  mlp4   |   594    |     4     |    4    |      2      |       669       |     4     |    4    |
|  apla   |   343    |     5     |    5    |      2      |       213       |     5     |    5    |
|  f51m   |   261    |     4     |    4    |      2      |       344       |     4     |    4    |
|   m4    |   974    |     4     |    4    |      2      |       658       |     4     |    4    |
|newtpla2 |    48    |     5     |    5    |      2      |       48        |     5     |    5    |
|  test1  |   1095   |     4     |    4    |      2      |       354       |     4     |    4    |
|   m2    |   339    |     4     |    4    |      2      |       350       |     4     |    4    |
|   br2   |   179    |     6     |    6    |      2      |       130       |     6     |    6    |
|  alu1   |    83    |     6     |    6    |      2      |       774       |     6     |    6    |
|  sqr6   |   197    |     3     |    3    |      2      |       234       |     3     |    3    |
|  bench  |   198    |     3     |    3    |      2      |       47        |     3     |    3    |
|   in5   |   446    |     7     |    7    |      2      |      1336       |     7     |    7    |
|newtpla1 |    33    |     5     |    5    |      2      |       33        |     5     |    5    |
|   m3    |   571    |     4     |    4    |      2      |       388       |     4     |    4    |
| newapla |    83    |     6     |    6    |      2      |       81        |     6     |    6    |
|  l8err  |   454    |     4     |    4    |      2      |       338       |     4     |    4    |
|   t4    |   238    |     6     |    6    |      2      |       248       |     6     |    6    |
|   br1   |   252    |     6     |    6    |      2      |       136       |     6     |    6    |
|  fout   |   442    |     3     |    3    |      2      |       214       |     3     |    3    |
|  mp2d   |   136    |     7     |    7    |      2      |      1677       |     7     |    7    |
|  alu2   |   225    |     5     |    5    |      2      |       554       |     5     |    5    |
|   t3    |   131    |     6     |    6    |      2      |       354       |     6     |    6    |
|   p3    |   385    |     4     |    4    |      2      |       139       |     4     |    4    |
|   m1    |   125    |     3     |    3    |      2      |       112       |     3     |    3    |
|bcd_div3 |    54    |     2     |    2    |      2      |       46        |     2     |    2    |
|  alu3   |   139    |     5     |    5    |      2      |       406       |     5     |    5    |
|   in7   |   182    |     7     |    7    |      2      |      1676       |     7     |    7    |

In questo caso possiamo appurare che tra i due approcci non ci sono differenze sostanziali, questo  risultato potrebbe essere derivato dalle modalità con cui  abc legge i circuiti multivalore in input.  

\newpage

## Conclusioni sui risultati

Una volta terminate tutte le analisi e le sperimentazioni eseguite sui circuiti binari e multivalore siamo stati in grado di trarre alcune informazioni molto importanti riguardanti essi e i loro funzionamenti. Tutti i dati ottenuti da questa sperimentazione ci hanno portati a notare come l'utilizzo della logica multivalore all'interno dei circuiti potrebbe rivelarsi molto interessante in termini di riduzione dei costi relativi ai valori di input che sono richiesti dai circuiti. La limitazione principale che abbiamo potuto riscontrare è insita nella carenza di strumenti di sintesi a disposizione che possano essere considerati applicabili alla logica multivalore. Come anticipato, solamente **MVSIS** è in grado di gestire e interpretare questo tipo di logica, ma rimane un programma ora mai datato e non più mantenuto, di conseguenza non vi sono al suo interno tool sufficientemente aggiornati o meglio implementati. I nuovi strumenti messi a disposizione, come ad esempio **ABC** accettano in ingresso circuiti multivalore, ma, per poter fare questo, nel loro motore di sintesi essi vengono convertiti in circuiti booleani. L'efficienza e l'efficacia delle nuove funzioni di sintesi attuate da **ABC** hanno reso l'utilizzo di questo software la prima scelta da utilizzare nel caso di circuiti multivalore e binari. Applicando un approccio ibrido siamo stati in grado di prendere il meglio dei sintetizzatori presentati, sfruttando  la riduzione degli input durante la conversione del dominio combinata all'alta efficacia degli strumenti di sintesi messi a disposizione di **ABC**. Questo tipo di metodica, definita ibrida, risulta essere il migliore approccio testato durante questa sperimentazione in quanto i risultati mostrano una riduzione dei costi computazionali nella maggior parte dei circuiti analizzati dalla nostra sperimentazione.